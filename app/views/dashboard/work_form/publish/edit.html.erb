<div class="container">
  <div class="row">
    <div class="col">
      <h4 class="text-center mb-4"><%= t 'dashboard.work_form.heading.edit' %></h4>
      <%= render WorkFormTabsComponent.new(work_version: @work_version, current_controller: controller_name) %>

      <div class="tab-content">
        <div class="tab-pane active show">

          <%= form_with(model: @work_version, url: dashboard_work_form_publish_path(@work_version), local: true, id: 'file-uploader') do |form| %>

            <%= render FormErrorMessageComponent.new(
                  form: form,
                  heading: t('.error_message', error: pluralize(form.object.errors.count, 'issue'))
                ) %>

            <%= render 'dashboard/work_form/details/fields', form: form %>

            <div class="form-wrapper form-wrapper--wide">
              <div class="keyline keyline--left mb-3">
                <h4><%= t '.contributors' %></h4>
              </div>
            </div>
            <%= render 'dashboard/work_form/contributors/fields', form: form %>

            <div class="form-wrapper form-wrapper--wide">
              <div class="keyline keyline--left mb-3">
                <h4><%= t '.files' %></h4>
              </div>
            </div>
            <% if form.object.file_version_memberships.any? %>
              <%= render 'dashboard/work_form/files/uploaded_file_list', file_version_memberships: form.object.file_version_memberships %>
            <% end %>

            <div class="form-wrapper form-wrapper--wide">
              <div class="keyline keyline--left mb-3">
                <h4><%= t '.publishing_details' %></h4>
              </div>
            </div>
            <%= render 'fields', form: form %>

            <%= render 'dashboard/work_form/shared/action_footer', form: form, publish: true %>
          <% end %>

        </div>
      </div>
    </div>
</div>
